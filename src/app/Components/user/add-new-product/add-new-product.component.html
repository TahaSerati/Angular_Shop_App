<!-- <app-header></app-header> -->

<div class="container my-4">

     <div class="flex w-full items-center justify-end  ">
          <div class="transition-all duration-400 cursor-pointer hover:text-blue-600 flex items-center space-x-2"
               (click)="goBack()">
               <div>
                    <span> بازگشت </span>
               </div>
               <div>
                    <i class="fa-solid fa-arrow-right-to-bracket text-sm"></i>
               </div>
          </div>
     </div>


     <div class="flex w-full items-center justify-end mt-4 mb-6">
          <div class="text-xl ">
               <span> افزودن کالای جدید </span>
          </div>
     </div>


     <div class="w-full">
          <form [formGroup]="addProductForm" (ngSubmit)="onFormSubmit()">
               <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-sage p-2 my-3">cls
                         
                    <label for="productDescription" class="text-xl"> نام </label>
                    <input type="text" formControlName="productDescription"
                         class="bg-gray-100 rounded-sm w-full h-10 px-3 py-1 focus:outline-none" placeholder="نام کالا">

               </div>

               <div id="formGR" class="w-full flex flex-col items-end space-y-2 rounded-sm bg-sage p-2 my-3">
                    <div class="text-xl my-2">
                         <span> دسته بندی اصلی </span>
                    </div>
                    <div class="flex items-center space-x-3">
                         <label for="productMainCategory"> لوازم کار ( کفش ، دستکش و ... ) </label>
                         <input type="radio" [value]="'workEquipment'" formControlName="productMainCategory"
                              class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                    </div>
                    <div class="flex items-center space-x-3">
                         <label for="productMainCategory"> لوازم ایمنی ( ماسک ، لباس ضد حریق و ... ) </label>
                         <input type="radio" [value]="'protectionEquipment'" formControlName="productMainCategory"
                              class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                    </div>
                    <div class="flex items-center space-x-3">
                         <label for="productMainCategory"> ابزار ترافیک </label>
                         <input type="radio" [value]="'trafficEquipment'" formControlName="productMainCategory"
                              class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                    </div>
                    <div class="flex items-center space-x-3 ">
                         <label for="productMainCategory"> جدید </label>
                         <input type="radio" [value]="'option4'" formControlName="productMainCategory"
                              class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                    </div>
               </div>


               <div id="formGR" class="w-full flex flex-col items-end space-y-2 rounded-sm bg-sage
                p-2 my-3 ">
                    <div class="text-xl my-2">
                         <span> دسته بندی فرعی </span>
                    </div>
                    <ng-container *ngIf="mainCatSelected == 'workEquipment' ">
                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory"> کفش </label>
                              <input type="radio" [value]="'shoe'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory "> دستکش </label>
                              <input type="radio" [value]="'glove'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory"> لباس </label>
                              <input type="radio" [value]="'cloth'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3 ">
                              <label for="productSubCategory"> برقی </label>
                              <input type="radio" [value]="'electronic'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3 ">
                              <label for="productSubCategory"> کلی </label>
                              <input type="radio" [value]="'general'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                    </ng-container>
                    <ng-container *ngIf="mainCatSelected == 'trafficEquipment' ">
                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory"> علامات ترافیکی </label>
                              <input type="radio" [value]="'trafficSign'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory "> وسایل پارکینگ </label>
                              <input type="radio" [value]="'parking'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory"> چراغ و لوازم فرعی </label>
                              <input type="radio" [value]="'light'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>

                    </ng-container>
                    <ng-container *ngIf="mainCatSelected == 'protectionEquipment' ">

                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory "> ماسک </label>
                              <input type="radio" [value]="'mask'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3">
                              <label for="productSubCategory"> کلاه </label>
                              <input type="radio" [value]="'helmet'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3 ">
                              <label for="productSubCategory"> عینک </label>
                              <input type="radio" [value]="'glasses'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3 ">
                              <label for="productSubCategory"> گوش گیر </label>
                              <input type="radio" [value]="'headPhone'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                         <div class="flex items-center space-x-3 ">
                              <label for="productSubCategory"> کمر بند </label>
                              <input type="radio" [value]="'belt'" formControlName="productSubCategory"
                                   [disabled]="sumPickerDisable"
                                   class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                         </div>
                    </ng-container>
               </div>


               <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-sage p-2 my-3">
                    <label for="productDescription" class="text-xl">توضیحات محصول</label>
                    <input type="text" formControlName="productDescription"
                         class="bg-gray-100 rounded-sm w-full h-10 px-3 py-1 focus:outline-none"
                         placeholder="توضیحات محصول">
               </div>


               <ng-container formArrayName="productImagesAddress">
                    <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-sage p-2 my-3">
                         <label for="productDescription" class="text-xl"> انتخاب عکس های محصول</label>
                         <ng-container
                              *ngFor="let image of addProductForm.get('productImagesAddress')['controls'];let i = index">
                              <input type="file" [formControlName]="i" (change)="onFileSelected($event)"
                                   class="bg-gray-100 rounded-sm w-full h-10 px-3 py-1 focus:outline-none"
                                   placeholder="عکس ها ">
                         </ng-container>
                         <div class="w-full flex items-center justify-center ">
                              <button class="py-2 px-3 bg-mustard rounded-sm " type="button"
                                   (click)="onAddToImagesArray()">افزودن عکس</button>
                         </div>
                    </div>
               </ng-container>


               <div id="formGR" class="w-full flex justify-end space-x-2 rounded-sm bg-mustard p-2 my-3">
                    <input type="checkbox" formControlName="isMultiple"
                         class="bg-gray-100 rounded-sm w-5 h-5 px-3 py-1 focus:outline-none">
                    <label for="isMultiple" class="text-xl"> تنوع رنگی دارد ؟ </label>
               </div>



               <div *ngIf="isMulitiple">
                    <div id="formGR" class="w-full flex justify-between rounded-sm bg-mustard p-2 my-3">
                         <ng-container formArrayName="colors">
                              <ng-container
                                   *ngFor="let color of addProductForm.get('colors')['controls']; let i = index;">
                                   <div class="p-1 flex space-x-2 rounded border">
                                        <label for="{{i}}">
                                             <ng-container *ngIf="i == 0">
                                                  سفید
                                             </ng-container>
                                             <ng-container *ngIf="i == 1">
                                                  سیاه
                                             </ng-container>
                                             <ng-container *ngIf="i == 2">
                                                  کرمی
                                             </ng-container>
                                             <ng-container *ngIf="i == 3">
                                                  زرد
                                             </ng-container>
                                             <ng-container *ngIf="i == 4">
                                                  آبی
                                             </ng-container>
                                             <ng-container *ngIf="i == 5">
                                                  بنفش
                                             </ng-container>
                                             <ng-container *ngIf="i == 6">
                                                  صورتی
                                             </ng-container>
                                             <ng-container *ngIf="i == 7">
                                                  قرمز
                                             </ng-container>
                                        </label>
                                        <input type="checkbox" name="{{i}}" [value]="i"
                                             [formControlName]="i.toString()">
                                   </div>
                              </ng-container>
                         </ng-container>
                    </div>
               </div>


               <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-sage p-2 my-3">
                    <label for="productPrice" class="text-xl"> قیمت نهایی </label>
                    <!-- <input type="text" formControlName="productDescription"
                         class="bg-gray-100 rounded-sm w-full h-10 px-3 py-1 focus:outline-none" placeholder="قیمت"> -->
                    <p-inputNumber inputId="integeronly" formControlName="productDescription" class="h-7">
                    </p-inputNumber>
                    <p-inputNumber inputId="integeronly" [disabled]="false" prefix="%"> </p-inputNumber>
               </div>


               <div id="formGR"
                    class="w-full flex space-x-2 items-center rounded-sm justify-end space-y-2 bg-mustard p-2 my-3">
                    <input type="checkbox" formControlName="hasDiscount"
                         style="transform: scale(1.6); margin-top: 10px; margin-right: 1px;">
                    <label for="hasDiscount" class="text-xl">آیا تخفیف دارد ؟</label>
               </div>

               <ng-container *ngIf="hasDiscount">

                    <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-mustard p-2 my-3">
                         <label for="discountAmount" class="text-xl"> قیمت اولیه </label>
                         <input type="text" formControlName="discountAmount"
                              class="bg-gray-100 rounded-sm w-full h-10 px-3 py-1 focus:outline-none"
                              placeholder="قیمت اولیه">
                    </div>

                    <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-mustard p-2 my-3">
                         <label for="discountPrecent" class="text-xl"> درصد تخفیف </label>
                         <div class="flex items-center space-x-3 justify-between">
                              <i class="fa-solid fa-percent text-3xl"></i>
                              <input type="text" formControlName="discountPrecent"
                                   class="bg-gray-100 rounded-sm w-full h-10 px-3 py-1 focus:outline-none"
                                   placeholder="درصد">
                         </div>
                    </div>

               </ng-container>


               <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-sage p-2 my-3">
                    <label for="availableAmount" class="text-xl"> تعداد کالا در انبار </label>
                    <input type="text" formControlName="availableAmount"
                         class="bg-gray-100 rounded-sm w-full h-10 px-3 py-1 focus:outline-none" placeholder="تعداد ">
               </div>




               <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-sage p-2 my-3">
                    <div class="my-3">
                         <label for="" class="text-xl"> ویژگی های کالا </label>
                    </div>

                    <ng-container formGroupName="productFeatures">
                         <ng-container *ngIf="getProductFeatureKeys().length < 1">
                              <div class="w-full flex items-center justify-end bg-sage rounded-sm py-1 px-2 space-x-3 ">
                                   <label> هیچ ویژگی ثبت نشده است </label>

                              </div>
                         </ng-container>
                         <ng-container *ngFor="let featureKey of getProductFeatureKeys()">
                              <div class="w-full flex items-center justify-end bg-sage rounded-sm py-1 px-2 space-x-3 ">
                                   <div class="">
                                        <label for=""
                                             class="text-xl">{{addProductForm.get('productFeatures').get(featureKey).value}}</label>
                                   </div>
                                   <div>
                                        <label for="" class="text-xl"> : {{featureKey}}</label>

                                   </div>
                              </div>
                              <!-- <input type="text" [value]="addProductForm.get('productFeatures').get(featureKey).value" readonly> -->


                         </ng-container>
                    </ng-container>




                    <div class="w-full text-center">
                         <button type="button" (click)="onAddNewFeatureClick()"
                              class="rounded-sm bg-mustard py-2 px-3 text-sm"> افزودن ویژگی </button>

                    </div>
                    <ng-container *ngIf="onAddNewFeature">
                         <form [formGroup]="onAddFeatureForm"
                              class=" w-full flex flex-col items-center justify-center space-y-2"
                              (ngSubmit)="onAddNewFeatureSubmit()">

                              <div class="flex flex-col items-end space-y-2 w-full">
                                   <label for="featureName"> عنوان ویژگی </label>
                                   <input type="text" placeholder="عنوان"
                                        class=" w-full bg-gray-100 rounded-sm py-2 px-2 focus:outline-none "
                                        formControlName="featureName" name="featureName">
                              </div>

                              <div class="flex flex-col items-end space-y-2 w-full">
                                   <label for="featureDescription"> توضیحات </label>
                                   <input type="text" placeholder="توضیحات"
                                        class=" w-full bg-gray-100 rounded-sm py-2 px-2 focus:outline-none "
                                        name="featureDescription" formControlName="featureDescription">
                              </div>

                              <div class="flex w-full items-center justify-center">
                                   <button type="submit" class="rounded-sm bg-mustard py-2 px-3
                                    text-sm"> ثبت ویژگی </button>
                              </div>

                         </form>
                    </ng-container>
               </div>

               <div id="formGR" class="w-full flex flex-col items-end space-y-2 bg-sage p-2 my-3">
                    <div class="flex flex-col w-full items-end jsutify-center">
                         <label for="productDescription" class="text-xl"> آیتم های جست و جو </label>
                         <label for="productDescription" class="text-xs"> کاربر با جست جو این موارد کالا را پیدا میکند
                         </label>
                    </div>
                    <div class="w-full flex items-center justify-center flex-wrap " style="gap: 10px;">
                         <ng-container formArrayName="searchItems">
                              <ng-container
                                   *ngFor="let color of addProductForm.get('searchItems')['controls']; let i = index;">
                                   <div class="">
                                        <input class="rounded-sm border focus:outline-none px-2 py-1" type="text"
                                             [formControlName]="i">
                                   </div>
                              </ng-container>
                         </ng-container>
                    </div>
                    <div class="w-full flex items-center justify-center">
                         <button class="px-3 py-2 rounded-sm bg-mustard" (click)="onAddToSearchItem()"
                              type="button">افزودن آیتم</button>
                    </div>
               </div>



               <div class="w-full flex justify-center my-3">
                    <button type="submit"
                         class="w-full rounded-sm bg-blue-500 px-3 py-2 border-none text-white">ثبت</button>
               </div>
               <div class="w-full flex justify-center my-3">
                    <button type="button" (click)="onFormReset()"
                         class="w-full rounded-sm bg-red-500 px-3 py-2 border-none text-white">بازنشانی </button>
               </div>


          </form>

     </div>


</div>

<app-footer></app-footer>